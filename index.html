<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <title>Á´ãÂÜ¨Âø´‰πê</title>
    <style>
        /* ÈöêËóèÈü≥‰πêËøõÂ∫¶Êù°Ôºå‰∏çÂç†Á©∫Èó¥ */
        audio { display: none; }
        /* ÂàùÂßãÂºπÁ™óÊ†∑Âºè */
        :root{
            --bg:#fafafa;
            --fg:#222;
            --sub:#777;
            --accent:#ff6b81;
            --accent-soft:#ffe5ea;
            --heart:#ff7a90;
        }
        *{box-sizing:border-box;margin:0;padding:0;}
        html,body{height:100%;}
        body{
            background:var(--bg);
            font-family:-apple-system,BlinkMacSystemFont,"SF Pro Text","Segoe UI",Roboto,Helvetica,Arial,
            "PingFang SC","Hiragino Sans GB","Noto Sans CJK SC","Microsoft YaHei",sans-serif;
            color:var(--fg);
            overflow:hidden;
        }

        .hearts{
            position:fixed;
            inset:0;
            overflow:hidden;
            pointer-events:none;
            z-index:0;
        }
        .heart{
            position:absolute;
            width:18px;
            height:18px;
            background:var(--heart);
            transform:rotate(45deg);
            opacity:.9;
            filter:drop-shadow(0 3px 6px rgba(255,105,130,.35));
            animation:floatUp linear forwards;
        }
        .heart:before,
        .heart:after{
            content:"";
            position:absolute;
            width:100%;
            height:100%;
            background:inherit;
            border-radius:50%;
        }
        .heart:before{left:-50%;}
        .heart:after{top:-50%;}
        @keyframes floatUp{
            to{
                transform:translateY(-200vh) rotate(45deg);
                opacity:0;
            }
        }

        /* È°∂ÈÉ®Ê†áÈ¢ò */
        .top-title{
            position:fixed;
            top:10px;
            left:50%;
            transform:translateX(-50%);
            text-align:center;
            z-index:5;
            pointer-events:none;
        }
        .top-title h1{
            font-size:20px;
            font-weight:600;
            letter-spacing:.4px;
        }
        .top-title p{
            margin-top:4px;
            font-size:13px;
            color:var(--sub);
        }

        /* ‰∏≠Â§ÆÈóÆÂè•+ÊåâÈíÆ */
        .center{
            position:fixed;
            inset:0;
            display:flex;
            flex-direction:column;
            align-items:center;
            justify-content:center;
            z-index:6;
            text-align:center;
            background:transparent;
        }
        .question{
            font-size:17px;
            line-height:1.7;
            margin-bottom:18px;
            padding:0 18px;
        }
        .btns{
            display:flex;
            gap:12px;
            justify-content:center;
            align-items:center;
            position:relative;
            width:100%;
            max-width:480px;
            margin:0 auto;
        }
        button{
            appearance:none;
            border:none;
            border-radius:999px;
            padding:10px 18px;
            font-size:15px;
            cursor:pointer;
            transition:all .32s cubic-bezier(.22,.61,.36,1.1);
            white-space:nowrap;
            display:flex;
            align-items:center;
            gap:6px;
            box-shadow:0 6px 18px rgba(255,107,129,.28);
            background:var(--accent);
            color:#fff;
            position:relative;
            z-index:2;
        }
        button.secondary{
            background:#f1f1f1;
            color:#444;
            box-shadow:none;
        }
        button.bounce{
            animation:bounce .35s ease;
        }
        @keyframes bounce{
            0%{transform:scale(1);}
            40%{transform:scale(1.16);}
            70%{transform:scale(.96);}
            100%{transform:scale(1);}
        }
        .fade-out{
            opacity:0;
            transform:translateY(-10px);
            pointer-events:none;
            transition:all .4s ease;
        }

        /* ÂÖ®Â±èÊ∞îÊ≥°Â±Ç */
        .bubble-layer{
            position:fixed;
            inset:0;
            padding:8px;
            z-index:3;
            overflow:hidden;
            display:none;
        }
        .bubble{
            position:absolute;
            padding:9px 13px;
            border-radius:18px;
            background:var(--accent-soft);
            font-size:15px;
            line-height:1.5;
            color:#ff5070;
            box-shadow:0 3px 10px rgba(0,0,0,.06);
            display:inline-flex;
            align-items:flex-start;
            gap:5px;
            word-break:break-word;
            max-width:min(260px, 52vw);
            animation:bubbleIn .35s cubic-bezier(.21,.67,.33,1.35);
            transform-origin:center;
        }
        .bubble span.icon{
            font-size:17px;
            line-height:1.2;
        }
        .bubble span.text{
            display:inline-block;
        }

        @keyframes bubbleIn{
            0%{
                opacity:0;
                transform:translateY(14px) scale(.4) rotate(-4deg);
            }
            55%{
                opacity:1;
                transform:translateY(-4px) scale(1.06) rotate(2deg);
            }
            100%{
                opacity:1;
                transform:translateY(0) scale(1) rotate(0deg);
            }
        }

        .hint{
            position:fixed;
            bottom:10px;
            right:12px;
            font-size:10px;
            color:#c4c4c4;
            z-index:4;
            display:none;
            text-align:right;
        }
    </style>
</head>
<body>
<!-- Èü≥‰πê -->
<audio id="bgm" loop>
    <source src="ÊàëÊúüÂæÖÁöÑ‰∏çÊòØÈõ™.mp3" type="audio/mpeg">
</audio>
<div class="hearts" id="hearts"></div>
<div class="top-title">
    <h1>Á´ãÂÜ¨Âø´‰πê ‚ùÑÔ∏è</h1>
</div>

<div class="center" id="center">
    <p class="question" id="question">
    </p>
    <div class="btns" id="btns">
        <button id="yesBtn">Âêå‰πê üíñ</button>
        <button class="secondary" id="noBtn">‰∏çÂø´‰πêüôà</button>
    </div>
</div>

<div class="bubble-layer" id="bubbleLayer"></div>
<div class="hint" id="hint"></div>
<script>
    // ===== ÊñáÊ°àÊ±† =====
    const RAW_MESSAGES = [
        "Á•ù‰Ω†ÊØèÂ§©ÈÉΩÂºÄÂøÉÂø´‰πêÔºåÂøÉÊÉ≥‰∫ãÊàêÔºÅüòä",
        "ÊÑø‰Ω†ÊØè‰∏ÄÂ§©ÈÉΩËøáÂæóÂÖÖÂÆûÁæéÂ•ΩÔºÅüå∏",
        "ÊúãÂèãÔºåÊÑø‰Ω†‰∏ÄÁîüÂπ≥ÂÆâÔºåÂπ∏Á¶èÂ∏∏‰º¥ÔºÅüçÄ",
        "‰Ω†ÊòØÊàëÊúÄÂÆùË¥µÁöÑÊúãÂèãÔºåÊÑø‰Ω†Ê∞∏ËøúÂø´‰πêÔºÅüíñ",
        "Êú™Êù•ÁöÑË∑ØÊàë‰ª¨‰∏ÄËµ∑Ëµ∞ÔºåÊ∞∏‰∏çÂàÜÁ¶ªÔºÅüö∂‚Äç‚ôÇÔ∏è",
        "Êó†ËÆ∫ÈÅáÂà∞‰ªÄ‰πàÂõ∞ÈöæÔºåÈÉΩË¶ÅÂãáÊï¢ÂâçË°åÔºÅüí™",
        "ÊÑø‰Ω†ÊØèÂ§©ÈÉΩÁ¨ëÂæóÁÅøÁÉÇÔºåÁîüÊ¥ªÂ¶ÇÊÑèÔºÅ‚ú®",
        "‰Ω†ÊòØÊàëÁîüÂëΩ‰∏≠ÁöÑÈò≥ÂÖâÔºåÊÑüË∞¢Êúâ‰Ω†ÔºÅ‚òÄÔ∏è",
        "Ê∞∏ËøúÊîØÊåÅ‰Ω†ÔºåÊúãÂèãÔºå‰∏çÁÆ°È£éÈõ®Â¶Ç‰ΩïÔºÅ‚õàÔ∏è",
        "ÊÑø‰Ω†Êú™Êù•ÁöÑÊØè‰∏ÄÂ§©ÈÉΩÂÖÖÊª°Âπ∏Á¶èÂíåÊàêÂäüÔºÅüåü",
        "ÊÑüË∞¢‰Ω†‰∏ÄÁõ¥Èô™‰º¥Âú®ÊàëË∫´ËæπÔºåÊÑø‰Ω†‰∏ÄÁîüÂπ≥ÂÆâÔºÅüôè",
        "Á•ùÁ¶è‰Ω†Êúâ‰∏™ÁæéÂ•ΩÁöÑÊú™Êù•ÔºåËµ∞ÂæóÊõ¥ËøúÔºÅüöÄ",
        "ÊúãÂèãÔºåÁ•ù‰Ω†‰∏ÄÁîüÂπ∏Á¶èÂÆâÂ∫∑ÔºåÂøÉÊÑøÈÉΩËÉΩÊàêÁúüÔºÅüí´",
        "ÊÑø‰Ω†Âú®‰∫∫ÁîüÁöÑË∑Ø‰∏äË∂äËµ∞Ë∂äÂÆΩÂπøÔºÅüåç",
        "‰∏çÁÆ°Âú®Âì™ÈáåÔºåÊàëÈÉΩÊ∞∏ËøúÊòØ‰Ω†ÁöÑÊúãÂèãÔºÅü§ù",
        "Á•ù‰Ω†ÊØèÂ§©ÈÉΩËÉΩÈÅáÂà∞Ê∏©ÊöñÁöÑ‰∫∫ÔºåÊã•ÊúâÁæéÂ•ΩÁöÑ‰∏ÄÂ§©ÔºÅüíõ",
        "‰Ω†ÊòØÊàëÊúÄÂÄºÂæóÁèçÊÉúÁöÑÊúãÂèãÔºåÊÑø‰Ω†Ê∞∏ËøúÂºÄÂøÉÔºÅüòä",
        "ÊúãÂèãÔºåÊÑø‰Ω†ÂøÉ‰∏≠ÊúâÂÖâÔºåÁîüÊ¥ªÊ∞∏ËøúÊ∏©ÊöñÔºÅüåü",
        "‰∏ÄË∑Ø‰∏äÊúâ‰Ω†ÔºåÁúüÂ•ΩÔºåÊú™Êù•Êàë‰ª¨ÁªßÁª≠ÂâçË°åÔºÅüë£",
        "ÊÑø‰Ω†Êã•Êúâ‰∏Ä‰∏™‰∏çÂπ≥Âá°ÁöÑ‰∫∫ÁîüÔºåÊ¢¶ÊÉ≥ÊàêÁúüÔºÅüå†",
        "Á•ù‰Ω†Â§©Â§©ÈÉΩÂÖÖÊª°ÂäõÈáèÔºåÁ¨ëÂÆπÂ∏∏Âú®ÔºÅüí™üòä",
        "ÊÑø‰Ω†ÊâÄÊúâÁöÑ‰ªòÂá∫ÈÉΩÊúâÂõûÊä•ÔºåÊú™Êù•Êó†ÈôêÂÖâÊòéÔºÅüåÖ",
        "ÊúãÂèãÔºåÊÑø‰Ω†Âπ≥ÂÆâÂñú‰πêÔºåÂπ∏Á¶èÁæéÊª°ÔºÅüçÉ",
        "Á•ù‰Ω†ÁîüÊ¥ªÁîúËúúÔºåÂøÉÊÉÖÊÑâÂø´ÔºåÊ¢¶ÊÉ≥ÊàêÁúüÔºÅüç≠",
        "Â∏åÊúõ‰Ω†ÊØèÂ§©ÈÉΩËÉΩÊúâÂø´‰πêÔºåÊú™Êù•ÂÖÖÊª°Â∏åÊúõÔºÅüåà",
        "ÊÑø‰Ω†Êó†ÂøßÊó†ËôëÔºåÊã•Êúâ‰∏ÄÂàáÁæéÂ•ΩÔºÅüíñ",
        "ÊÑüË∞¢‰Ω†‰∏ÄÁõ¥Âú®ÊàëË∫´ËæπÔºåÊÑø‰Ω†Ê∞∏ËøúÂπ∏Á¶èÔºÅüåπ",
        "‰Ω†ÊòØÊàëÊ∞∏ËøúÁöÑÊúãÂèãÔºåÊÑø‰Ω†Ê∞∏ËøúÂπ¥ËΩªÂø´‰πêÔºÅüéâ",
        "ÊúãÂèãÔºåÊÑø‰Ω†‰∫∫ÁîüÁ≤æÂΩ©ÔºåÁ¨ëÂÆπÊ∞∏ËøúÁÅøÁÉÇÔºÅüòÑ",
        "Êó†ËÆ∫Êú™Êù•ÊÄéÊ†∑ÔºåÊàëÈÉΩ‰ºöÈô™‰Ω†Ëµ∞‰∏ãÂéªÔºÅüí´",
        "ÊÑø‰Ω†ÊØè‰∏ÄÂ§©ÈÉΩÂÖÖÊª°Èò≥ÂÖâÔºåÂøÉÊÉÖÊÑâÂø´ÔºÅüåû",
        "ÊúãÂèãÔºåÁ•ù‰Ω†Êú™Êù•Êõ¥Âä†ËæâÁÖåÔºåÊ¢¶ÊÉ≥ÊàêÁúüÔºÅüå†",
        "ÊÑø‰Ω†ÁöÑÁîüÊ¥ªÂÉèËøôÁæé‰∏ΩÁöÑËä±Êúµ‰∏ÄÊ†∑ÁªΩÊîæÔºÅüå∏",
        "Á•ù‰Ω†‰∏ÄÂàáÈ°∫Âà©Ôºå‰∫ã‰∫ãÂ¶ÇÊÑèÔºÅüçÄ",
        "Êó†ËÆ∫Êú™Êù•Â§ö‰πàÂ§çÊùÇÔºåÂ∏åÊúõ‰Ω†ÈÉΩËÉΩËΩªÊùæÈù¢ÂØπÔºÅüí´",
        "ÊÑø‰Ω†ÊØèÂ§©ÈÉΩËÉΩÊî∂Ëé∑ÂñúÊÇ¶ÔºåÂøÉ‰∏≠ÂÖÖÊª°Ê∏©ÊöñÔºÅüíõ",
        "Á•ùÁ¶è‰Ω†Ê∞∏ËøúÊã•Êúâ‰∏Ä‰∏™Ê∏©È¶®ÁöÑÂÆ∂ÔºåÂπ∏Á¶èÊª°Êª°ÔºÅüè°",
        "ÊúãÂèãÔºåÊÑø‰Ω†ÁöÑ‰∫∫ÁîüÂÖÖÊª°ÁæéÂ•ΩÁöÑÊÉäÂñúÂíåÂ•ΩËøêÔºÅüéâ",
        "ÊÑø‰Ω†Âú®Êú™Êù•ÁöÑÈÅìË∑Ø‰∏äËµ∞ÂæóÊõ¥Âä†ÂùöÂÆöÂíåËá™‰ø°ÔºÅüí™",
        "ÊÑø‰Ω†ÁöÑÁ¨ëÂÆπÊ∞∏ËøúÁÅøÁÉÇÔºåÂøÉÊÉÖÊ∞∏ËøúÊÑâÂø´ÔºÅüòÅ",
        "Á•ù‰Ω†Â§©Â§©ÂºÄÂøÉÔºåÂÅöËá™Â∑±ÊúÄÂñúÊ¨¢ÁöÑ‰∫ãÊÉÖÔºÅüåü",
        "ÊÑüË∞¢‰Ω†Èô™‰º¥ÊàëÂ∫¶ËøáÊØè‰∏Ä‰∏™Á≤æÂΩ©Êó∂ÂàªÔºåÊÑø‰Ω†Ê∞∏ËøúÂπ∏Á¶èÔºÅ‚ú®",
        "ÊÑø‰Ω†Êó†ÂøßÊó†ËôëÔºåÊã•Êúâ‰∏ÄÂàá‰Ω†ÊÉ≥Ë¶ÅÁöÑÁæéÂ•ΩÔºÅüå∑",
        "ÊúãÂèãÔºåÊÑø‰Ω†Âú®Êú™Êù•ÁöÑÊó•Â≠êÈáåÂ¶ÇÊÑø‰ª•ÂÅøÔºåÊî∂Ëé∑Êª°Êª°ÔºÅüéØ",
        "ÊÑø‰Ω†Ë∫´ÂøÉÂÅ•Â∫∑ÔºåÁ¨ëÂÆπÊ∞∏ËøúÁÅøÁÉÇÔºÅüåû",
        "Á•ù‰Ω†Êã•Êúâ‰∏Ä‰∏™ÁæéÂ•ΩÁöÑ‰∫∫ÁîüÔºåÊØè‰∏™Ê¢¶ÊÉ≥ÈÉΩËÉΩÂÆûÁé∞ÔºÅüåà",
        "ÊúãÂèãÔºåÊÑø‰Ω†Êú™Êù•ÁöÑÊØè‰∏ÄÂ§©ÈÉΩÂÖÖÊª°Èò≥ÂÖâÂíåÁà±ÔºÅüíñ",
        "ÊÑø‰Ω†Âú®Êú™Êù•ÁöÑË∑Ø‰∏äÊõ¥Âä†ÂùöÂÆöÔºåÂãáÂæÄÁõ¥ÂâçÔºÅüöÄ",
        "Á•ù‰Ω†ÊØèÂ§©ÈÉΩÊúâÂºÄÂøÉÁöÑ‰∫ãÊÉÖÂèëÁîüÔºåÁîüÊ¥ªÂÖÖÊª°Ê¨¢‰πêÔºÅüéà",
        "ÊÑø‰Ω†Êó∂ÂàªÊã•ÊúâÂ•ΩËøêÔºåÊ∞∏ËøúÁ¨ëÂæóÊúÄÁÅøÁÉÇÔºÅüåü",
        "Êó†ËÆ∫Êú™Êù•Â¶Ç‰ΩïÔºåÊÑø‰Ω†ÈÉΩËÉΩ‰ªéÂÆπ‰∏çËø´Âú∞Èù¢ÂØπÔºÅüå∏",
        "ÊúãÂèãÔºåÊÑø‰Ω†Âú®ÁîüÊ¥ªÁöÑËàûÂè∞‰∏äÂßãÁªàÈó™ËÄÄÂÖâÂΩ©ÔºÅ‚ú®",
        "Á•ù‰Ω†ÂøÉÊÉ≥‰∫ãÊàêÔºåÊú™Êù•Êõ¥Âä†Á≤æÂΩ©ÔºÅüå†",
        "ÊÑø‰Ω†Âú®ÊØè‰∏Ä‰∏™ÊåëÊàòÈù¢ÂâçÈÉΩËÉΩÂãáÊï¢ÂâçË°åÔºÅü¶ã",
        "ÊÑø‰Ω†ÁöÑ‰∫∫ÁîüÂÖÖÊª°Áà±‰∏éÊ∏©ÊöñÔºå‰∫ã‰∫ãÈ°∫ÂøÉÔºÅüçÄ",
        "ÊúãÂèãÔºåÁ•ù‰Ω†ÂâçÁ®ã‰ººÈî¶ÔºåÊú™Êù•Êó†ÂèØÈôêÈáèÔºÅüíº",
        "ÊÑø‰Ω†ÊØèÂ§©ÈÉΩÊã•ÊúâÊó†Â∞ΩÁöÑÂπ∏Á¶è‰∏éÊ¨¢‰πêÔºÅüòä",
        "Á•ù‰Ω†Ê∞∏ËøúÂÉè‰ªäÂ§©‰∏ÄÊ†∑Áæé‰∏ΩÔºåÂÖÖÊª°ÂäõÈáèÔºÅüí™",
        "ÊÑø‰Ω†ÁöÑ‰∫∫ÁîüÂÉè‰∏ÄÈ¶ñÁæéÂ¶ôÁöÑÊ≠åÔºåÊ∞∏ËøúÂä®Âê¨ÔºÅüé∂",
        "ÊúãÂèãÔºåÊÑø‰Ω†‰∏ÄÁîüÂπ≥ÂÆâÂπ∏Á¶èÔºå‰∏á‰∫ãÂ¶ÇÊÑèÔºÅüå∑",
    ];

    const icons = ["üíó","üíï","üíì","üíû","ü©∑","‚ú®","ü•π","ü§ç","ü´∂","üêª","üê±","‚ùÑÔ∏è","‚òÉÔ∏è","üß£","ü´ß","üå∑","‚≠êÔ∏è","üì©","üíå","üß∏"];
    function pickIcon(){ return icons[Math.floor(Math.random()*icons.length)]; }

    const heartsEl = document.getElementById('hearts');
    const yesBtn = document.getElementById('yesBtn');
    const noBtn = document.getElementById('noBtn');
    const center = document.getElementById('center');
    const bubbleLayer = document.getElementById('bubbleLayer');
    const hint = document.getElementById('hint');
    const btns = document.getElementById('btns');

    let declineCount = 0;
    let yesScale = 1;
    let started = false;
    let runawayInitialized = false;

    // ÈÄÉË∑ëÂÅèÁßªÔºàÂè™Áî® transform ÂÅö‰ΩçÁßªÔºåÁ°Æ‰øùÊØèÊ¨°ÈÉΩÊòØÂä®ÁîªÔºå‰∏çÈó™Áé∞Ôºå‰πü‰∏çÂíå‚ÄúÊÑøÊÑè‚ÄùÈáçÂè†Ôºâ
    const runDeltas = [
        { x: 160, y: -40 },  // ÂæÄÂè≥‰∏äÈÄÉ
        { x: -180, y: 40 },  // ÂæÄÂ∑¶‰∏ãÈÄÉ
        { x: 150, y: 70 }    // ÂæÄÂè≥‰∏ãÈÄÉ
    ];

    function initRunawayPosition() {
        if (runawayInitialized) return;
        runawayInitialized = true;

        const parentRect = btns.getBoundingClientRect();
        const rect = noBtn.getBoundingClientRect();
        const offsetLeft = rect.left - parentRect.left;
        const offsetTop = rect.top - parentRect.top;

        noBtn.style.position = "absolute";
        noBtn.style.left = offsetLeft + "px";
        noBtn.style.top = offsetTop + "px";
        noBtn.style.transform = "translate(0,0)";
    }

    function moveNoBtn(step){
        const d = runDeltas[(step - 1) % runDeltas.length];
        const angle = (Math.random() > 0.5 ? 10 : -10);
        noBtn.style.transform = `translate(${d.x}px, ${d.y}px) rotate(${angle}deg)`;
    }

    yesBtn.addEventListener('click', () => {
        if (!started) startLoveMode();
    });


    noBtn.addEventListener('click', () => {
        if (started) return;
        declineCount++;

        if (declineCount === 1) {
            initRunawayPosition();
            noBtn.textContent = "ËØ•ÁÇπÂè¶‰∏Ä‰∏™ÔºåÂíãÁÇπÈîô‰∫Ü üôÉ";
            moveNoBtn(declineCount);
        } else if (declineCount === 2) {
            noBtn.textContent = "ËØ•ÁÇπÂè¶‰∏Ä‰∏™ÔºåÂíãÁÇπÈîô‰∫Ü üôÉ";
            moveNoBtn(declineCount);
        } else if (declineCount === 3) {
            noBtn.textContent = "ËØ•ÁÇπÂè¶‰∏Ä‰∏™ÔºåÂíãÁÇπÈîô‰∫Ü üôÉ";
            moveNoBtn(declineCount);
        } else if (declineCount === 4) {
            noBtn.textContent = "ËØ•ÁÇπÂè¶‰∏Ä‰∏™ÔºåÂíãÁÇπÈîô‰∫Ü üôÉ";
            moveNoBtn(declineCount);
        } else if (declineCount >= 5) {

            if (!started) startLoveMode();
            return;
        }

        // ÂâçÂõõÊ¨°È°∫‰æøÊîæÂ§ß‚ÄúÊÑøÊÑè‚ÄùÊåâÈíÆ
        if (declineCount <= 4) {
            yesScale *= 1.2;
            yesBtn.style.transform = `scale(${yesScale})`;

            yesBtn.classList.remove('bounce');
            noBtn.classList.remove('bounce');
            void yesBtn.offsetWidth;
            yesBtn.classList.add('bounce');
            noBtn.classList.add('bounce');
        }
    });

    function startLoveMode(){
        started = true;
        center.classList.add('fade-out');

        setTimeout(() => {
            center.style.display = 'none';
            bubbleLayer.style.display = 'block';
            hint.style.display = 'block';
            startHearts();
            startBubbles();
        }, 420);
    }

    // ÂøÉÂøÉ
    function startHearts(){
        function spawnHeart(){
            const h = document.createElement('div');
            h.className = 'heart';
            const size = 10 + Math.random()*18;
            h.style.width = size+'px';
            h.style.height = size+'px';
            h.style.left = (Math.random()*100) + 'vw';
            h.style.top  = (100 + Math.random()*10) + 'vh';
            const colors = ["#ff7a90","#ffa3b1","#ff8f8f","#ff6b81","#ffd1d9"];
            const c = colors[Math.floor(Math.random()*colors.length)];
            h.style.background = c;
            h.style.setProperty('--heart', c);
            const dur = 7 + Math.random()*6;
            h.style.animationDuration = dur + 's';
            heartsEl.appendChild(h);
            setTimeout(()=>h.remove(), dur*1000+800);
        }
        setInterval(() => {
            if (!started) return;
            const n = 1 + Math.floor(Math.random()*3);
            for (let i=0; i<n; i++) spawnHeart();
        }, 420);
    }
    // È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÔºåÁªëÂÆöÊåâÈíÆ‰∫ã‰ª∂
    window.onload = function() {
        const giftPopup = document.getElementById('center');
        const wishContainer = document.getElementById('center');
        const yesBtn = document.getElementById('yesBtn');
        const noBtn = document.getElementById('noBtn');
        const bgm = document.getElementById('bgm');
        // ÁÇπÂáª"Á°ÆÂÆö"ÔºöÈöêËóèÂºπÁ™óÔºåÂêØÂä®Á•ùÁ¶èÊïàÊûúÂíåÈü≥‰πê
        yesBtn.addEventListener('click', () => {
            bgm.play().catch(() => {
                alert('ËØ∑ÁÇπÂáªÈ°µÈù¢Á©∫ÁôΩÂ§ÑËß¶ÂèëÈü≥‰πê');
                document.body.addEventListener('click', () => bgm.play(), {once: true});
            });
            giftPopup.style.display = 'none';
            wishContainer.style.display = 'block';
        });
    };
    function startBubbles(){
        let total = 0;

        function pushBubble(){
            if (!started) return;

            const msg = RAW_MESSAGES[Math.floor(Math.random()*RAW_MESSAGES.length)];

            const b = document.createElement('div');
            b.className = 'bubble';

            const iconEl = document.createElement('span');
            iconEl.className = 'icon';
            iconEl.textContent = pickIcon();

            const textEl = document.createElement('span');
            textEl.className = 'text';
            textEl.textContent = msg;

            b.appendChild(iconEl);
            b.appendChild(textEl);
            bubbleLayer.appendChild(b);

            const layerRect = bubbleLayer.getBoundingClientRect();
            const bubbleRect = b.getBoundingClientRect();
            const maxLeft = Math.max(4, layerRect.width - bubbleRect.width - 6);
            const maxTop  = Math.max(24, layerRect.height - bubbleRect.height - 14);

            const left = 4 + Math.random() * maxLeft;
            const top  = 24 + Math.random() * maxTop;

            b.style.left = left + 'px';
            b.style.top  = top + 'px';

            total++;

            let delay;
            if (total < 60) {
                delay = 70 + Math.random()*45;
            } else if (total < 220) {
                delay = 140 + Math.random()*130;
            } else {
                delay = 260 + Math.random()*220;
            }

            if (total > 450 && bubbleLayer.children.length > 320) {
                bubbleLayer.removeChild(bubbleLayer.firstChild);
            }

            setTimeout(pushBubble, delay);
        }

        setTimeout(pushBubble, 160);
    }
</script>
</body>
</html>
